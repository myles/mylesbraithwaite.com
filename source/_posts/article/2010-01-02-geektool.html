---
layout: post_article
category: article
date: 2010-01-02T00:00:00
title: "Geektool Setup"
tags: [mac-os-x, apple, geektool, desktop]
---

<!-- TODO: Clean up this post layout. -->
<!-- TODO: Download all the media files. -->

<p>I recently installed <a href="http://projects.tynsoe.org/en/geektool/">Geektool</a> on my MacBook Pro. I used so many sources to set it up that I thought it would be a good idea that I write a blog post about some of the more complicated configurations.</p>

<p><a href="http://www.flickr.com/photos/mylesbraithwaite/4237928127/"><img alt="My Geektool Setup" src="http://farm5.static.flickr.com/4051/4237928127_d2e13648c1_m.jpg"></a></p>

<h3 id="sunrise-sunset">Sunrise &amp; Sunset</h3>

<p><img alt="Sunrise &amp; Sunset" src="//media.mylesbraithwaite.com/attachments/blog_post/15/01-sunrise-and-sunset.png"></p>

<p>I am getting the sunrise &amp; sunset data from <a href="http://wund.com/">weather underground</a> <a href="http://m.wund.com">mobile website</a>.</p>
<h4 id="sunrise">Sunrise</h4>
<div class="codehilite"><pre><span class="n">curl</span> <span class="o">--</span><span class="n">silent</span> <span class="n">http</span><span class="o">:</span><span class="c1">//m.wund.com/global/stations/71265.html | grep &#39;Sunrise&#39; | sed -e :a -e &#39;s/]*&amp;gt;//g;/&amp;lt;/N;//ba&#39; | sed -e &#39;s/Sunrise/Sunrise: /g&#39; | sed -e &#39;s/EST//g&#39;</span>
</pre></div>


<h4 id="sunset">Sunset</h4>
<div class="codehilite"><pre><span class="n">curl</span> <span class="o">--</span><span class="n">silent</span> <span class="n">http</span><span class="o">:</span><span class="c1">//m.wund.com/global/stations/71265.html | grep &#39;Sunset&#39; | sed -e :a -e &#39;s/]*&amp;gt;//g;/&amp;lt;/N;//ba&#39; | sed -e &#39;s/Sunset/Sunset: /g&#39; | sed -e &#39;s/EST//g&#39;</span>
</pre></div>


<h3 id="ip-addresses">IP Addresses</h3>
<p><img alt="IP Addresses" src="//media.mylesbraithwaite.com/attachments/blog_post/15/02-ip-addresses.png"></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span class="c">#!/bin/sh</span>
<span class="nv">myen0</span><span class="o">=</span><span class="sb">`</span>ifconfig en0 | grep <span class="s2">&quot;inet &quot;</span> | grep -v 127.0.0.1 | awk <span class="s1">&#39;{print $2}&#39;</span><span class="sb">`</span>
<span class="nv">myen1</span><span class="o">=</span><span class="sb">`</span>ifconfig en1 | grep <span class="s2">&quot;inet &quot;</span> | grep -v 127.0.0.1 | awk <span class="s1">&#39;{print $2}&#39;</span><span class="sb">`</span>
<span class="nv">wip</span><span class="o">=</span><span class="sb">`</span>/usr/bin/curl --silent http://checkip.dyndns.org | awk <span class="s1">&#39;{print $6}&#39;</span> | cut -f 1 -d <span class="s2">&quot;&lt;&quot;</span><span class="sb">`</span>
<span class="nv">INACTIVE</span><span class="o">=</span><span class="s1">&#39;INACTIVE&#39;</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$myen0&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>
<span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Ethernet: $myen0&quot;</span>
<span class="k">else</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Ethernet: $INACTIVE&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$myen1&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>
<span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Wireless: $myen1&quot;</span>
<span class="k">else</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Wireless: $INACTIVE&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$wip&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>
<span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;External: $wip&quot;</span>
<span class="k">else</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;External: $INAVTIVE&quot;</span>
<span class="k">fi</span>
</pre></div>
</td></tr></table>

<h3 id="weather-image">Weather Image</h3>
<p><img alt="Weather Image" src="//media.mylesbraithwaite.com/attachments/blog_post/15/03-weather-image.png"></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span class="c">#!/bin/sh</span>
<span class="c"># Get weather image</span>
<span class="c"># Add this to your crontab.</span>

<span class="nv">YAHOO_WEATHER_HTML</span><span class="o">=</span><span class="sb">`</span>curl --silent <span class="s2">&quot;http://weather.yahoo.com/canada/ontario/toronto-4118/?unit=c&quot;</span><span class="sb">`</span>
curl --silent -o /tmp/weather.html <span class="s2">&quot;http://weather.yahoo.com/canada/ontario/toronto-4118/?unit=c&quot;</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$YAHOO_WEATHER_HTML</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">        </span>curl --silent -o /tmp/weather.png <span class="k">$(</span>grep <span class="s1">&#39;div class=&quot;forecast-icon&quot; style=&quot;background:url&#39;</span> /tmp/weather.html | awk -F<span class="s2">&quot;&#39;&quot;</span> <span class="s1">&#39;{ printf $2 }&#39;</span><span class="k">)</span>
<span class="k">fi</span>
</pre></div>
</td></tr></table>

<h3 id="weather-forecast">Weather Forecast</h3>
<p><img alt="Weather Forecast" src="//media.mylesbraithwaite.com/attachments/blog_post/15/04-weather-forecast.png"></p>
<p>I am using <a href="http://ca.weather.yahoo.com/">Yahoo Weather</a> to get the weather image.</p>
<div class="codehilite"><pre><span class="nb">curl</span> <span class="o">--</span><span class="nx">silent</span> <span class="s2">&quot;http://weather.yahooapis.com/forecastrss?p=CAXX0504&amp;u=c&quot;</span> <span class="o">|</span> <span class="nx">grep</span> <span class="na">-E</span> <span class="s1">&#39;(Current Conditions:|C&lt;BR)&#39;</span> <span class="o">|</span> <span class="nx">sed</span> <span class="na">-e</span> <span class="s1">&#39;s/Current Conditions://&#39;</span> <span class="na">-e</span> <span class="s1">&#39;s///&#39;</span> <span class="na">-e</span> <span class="s1">&#39;s/&lt;b&gt;//&#39;</span> <span class="na">-e</span> <span class="s1">&#39;s///&#39;</span> <span class="na">-e</span> <span class="s1">&#39;s///&#39;</span> <span class="na">-e</span> <span class="s1">&#39;s///&#39;</span> <span class="na">-e</span> <span class="s1">&#39;s///&#39;</span><span class="o">&lt;/</span><span class="nx">b</span><span class="o">&gt;</span>
</pre></div>
